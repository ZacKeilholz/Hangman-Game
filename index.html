<!DOCTYPE html>
<html lang="en-us">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://meyerweb.com/eric/tools/css/reset/reset.css">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <style>
        body {
            background: url('') no-repeat center center fixed;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            background-size: cover;
            -o-background-size: cover;
        }

        footer {
            position: fixed;
            left: 0;
            bottom: 0;
            height: 50px;
            width: 100%;
        }

        body {
            font-family: "Courier New", Courier, monospace;
        }

        .bg-dark {
            background-color: black !important;
        }
    </style>

    <title>MNMLHNGMN</title>
</head>

<body id="main">


    <!-- Style todo list:
        -Add background image/make it responsive
        -organize div containers etc.
    -->
    <nav class="navbar navbar-dark bg-dark ">
        <div class="container col-12 col-xs-12">
            <a class="navbar-brand text-white text-center text-uppercase mx-auto pt-3" href="index.html">
                <h2 class="border border-white pl-1 pr-1 pb-1 pt-1">mnmlhngmn</h2>
            </a>
        </div>
    </nav>
    <br>
    <br>
    <br>

    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-md-10 offset-md-1 col-lg-8 offset-lg-2 bg-white pt-5 pb-3">
                <div class=" container">
                    <div class="row">
                        <div class="col-xs-12 col-md-10 offset-md-1 ">

                            <div class="row">
                                <div class="col-12" id="main-word-container">
                                    <h3 class="display-xs-2 text-center " id="game-title">A Minimalist Hangman Game For Masochists</h3>
                                </div>
                            </div>



                            <div class="row">
                                <div class="col-12" id="press-to-begin">
                                    <hr class="my-3" id="hr-line">
                                    <p class="lead text-center" id="game-instructions">Type any key to begin.</p>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-12" id="player-score-container">
                                </div>
                            </div>

                            <!-- Scoreboard... This is empty until game starts-->
                            <div class="row">
                                <div class="col-12" id="guessed-letters-container">
                                    <h2></h2>
                                </div>
                            </div>

                            <br>


                            <div class="row">
                                <div class="col-12" id="hangman-death-container">
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!--Sticky Footer -->
    <footer class="container-fluid bg-dark" id="footer-container">
        <div class="row">
            <div class="col-lg-12">
                <p class="text-center pt-2 mb-1" id="footer-text">
                    <small class="text-white">Copyright &copy2018</small>
                </p>
            </div>
        </div>

    </footer>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

    <script type="text/javascript">
        //Current Bugs/improvements that need to happen: 
        //1.Show guessed letters, score, and ----- immediately after pressing first letter
        //2. Add icons to score and guessed letters
        //3. Fix duplicate letter guess
        //4. Filter letter input to only allow letters.
        //5. random image texture background
        //6. Break the code into assets/css/scripts per assignment
        //7
        //Last things:  1. Add a readme.md to repository describing project,2 . add the project to portfolio page.  3. add link in the homework submission in bootcampspot.  


        //HTML Targets
        //Main Container for injecting hidden word
        var mainWordTarget = document.getElementById("main-word-container");
        var mainWordContent = document.createElement("h1");

        var pressToBeginTarget = document.getElementById("press-to-begin");

        var guessedLettersTarget = document.getElementById("guessed-letters-container");
        var guessedLettersContent = document.createElement("h3");


        var playerScoreTarget = document.getElementById("player-score-container");
        var playerScoreContent = document.createElement("h4");


        var hangmanDeathTarget = document.getElementById("hangman-death-container");
        var hangmanDeathContent = document.createElement("h1");



        //HTML Replacement Vars- set these equal to whatever you want and append

        var appendHeading = document.createElement("h4");
        var appendP = document.createElement("p");

        //misc html
        var gameTitleTarget = document.getElementById("game-title");
        var gameInstructionsTarget = document.getElementById("game-instructions");
        var hrTarget = document.getElementById("hr-line");


        //body html 
        var main = document.getElementById("main");

        //Global Vars
        var userInput;
        var gameStarted = false;

        //Create a list of words to be chosen from randomly
        var hangmanWordlist = ["and", "terrible"];
        var hangmanUsedWords = [];
        var currentWord = "";
        var currentWordArray = [];

        var blankLetter = "#";
        var wordConstructionArray = [];

        var guessedLetters = [];

        //Counters used in for loops
        var correctLetterFound = 0;

        //Store used words in a fresh array... this might be better as a local variable
        /*Game Score- There are two scores- one for keeping track of hangman death impendence and the other for number of times user wins*/

        var wins = 0;
        var hangmanDeath = 0;
        var score = 0;

        var gameOverValue = 7;

        var newGuess = true;

        // This function is run whenever the user presses a key.
        document.onkeyup = function (event) {

            // Determines which key was pressed.
            userInput = event.key;
            playGame();
        };


        function updateHTML() {
            //Guessed Letters HTML :
            guessedLettersContent.textContent = "Gsd Ltrs: " + arrayToString(guessedLetters);
            guessedLettersContent.classList.add("text-center")
            guessedLettersTarget.appendChild(guessedLettersContent);

            //Partial Word HTML :
            mainWordContent.textContent = arrayToString(wordConstructionArray);
            mainWordContent.classList.add("text-center")
            mainWordTarget.appendChild(mainWordContent);

            //Player Score HTML
            playerScoreContent.textContent = "Yr Scr: " + score;
            playerScoreContent.classList.add("text-center")
            playerScoreTarget.appendChild(playerScoreContent);

            var hangmanBodyConstruction = "";
            switch (hangmanDeath) {
                case (0):
                    hangmanBodyConstruction = "------";
                    break;
                case (1):
                    hangmanBodyConstruction = "X-----";
                    break;
                case (2):
                    hangmanBodyConstruction = "XX----";
                    break;
                case (3):
                    hangmanBodyConstruction = "XXX---";
                    break;
                case (4):
                    hangmanBodyConstruction = "XXXX--";
                    break;
                case (5):
                    hangmanBodyConstruction = "XXXXX-";
                    break;
                case (6):
                    hangmanBodyConstruction = "XXXXXX";
                    break;

                default:
                    hangmanBodyConstruction = "------";
            }

            //Hangman HTML Drawing
            hangmanDeathContent.textContent = hangmanBodyConstruction;
            hangmanDeathContent.classList.add("text-center");
            hangmanDeathContent.classList.add("text-danger");
            hangmanDeathContent.classList.add("font-weight-bold");
            hangmanDeathTarget.appendChild(hangmanDeathContent);
        }


        //Start Game
        function playGame() {

            //Add Score and Guessed letters to HTML 
            updateHTML();

            //Initial Game Startup Sequence- This does everything up to the user choosing their first letter
            if (gameStarted === false) {
                gameTitleTarget.style.display = "none";
                gameInstructionsTarget.style.display = "none";
                wordGenerator();
                gameStarted = true;
            } else if (gameStarted) {

                //1.  Check if letter has been pressed already.  If it hasn't, add it to the checked letter list and if it HAS already been guessed, tell the user... Also, toggle a boolean for next phase.
                letterGuessUsed(userInput);
            }
        }

        function wordGenerator() {
            currentWordArray = [];
            wordConstructionArray = [];
            guessedLetters = [];

            //Get a random word from dictionary. 
            var currentWord = hangmanWordlist[Math.floor(Math.random() * hangmanWordlist.length)];
            
            //Turn currentWord into a blank-space partial-word array
            for (var i = 0; i < currentWord.length; i++) {
                currentWordArray.push(currentWord.charAt(i));
                wordConstructionArray.push(blankLetter);
            }

            mainWordContent.textContent = arrayToString(wordConstructionArray);
            mainWordContent.classList.add("text-center")
            mainWordTarget.appendChild(mainWordContent);

        }


        //Checks if input letter is already in the guessed letter array for scoring purposes
        function letterGuessUsed(input) {
            var newGuess = true;
            for (var i = 0; i < guessedLetters.length; i++) {
                if (input == guessedLetters[i]) {
                    newGuess = false;
                }
            }
            if (newGuess) {
                guessedLetters.push(input);
                console.log("e");
            } else if (guessedLetters.length === 0) {
                newGuess = true;
                guessedLetters.push(input);
                console.log("b");
            } else {
                newGuess = true;
            }

            replaceLetter(userInput);
            gameScoreUpdate();
        }


        //Death toggle gets tripped if the userInput letter doesn't find a match in the currentWordArray.   
        function replaceLetter(input) {

            var deathToggle = false;

            //Check if input letter is part of the current word
            for (var i = 0; i < currentWordArray.length; i++) {
                if (input === currentWordArray[i]) {
                    console.log("Great job.  You got a letter");
                    wordConstructionArray[i] = input;
                    deathToggle = true;
                }
            }
            if (!deathToggle) {
                hangmanDeath++;
            }
        };

        function arrayToString(input) {
            var string = "";
            for (var i = 0; i < input.length; i++) {
                string += input[i];
            }
            return string;
        }


        function gameScoreUpdate() {
            //checks if YOU LOST!
            if (hangmanDeath == gameOverValue) {
                hangmanDeath = 0;
                score = 0;
                guessedLetters = [];
                document.body.style.backgroundImage = "url('https://tccandlesandmore.com/wp-content/uploads/2017/01/zen-space.jpg')"
                gameStarted = false;
                playGame();

                //Checks if you WON!
            } else if (arrayToString(wordConstructionArray) == arrayToString(currentWordArray)) {
                hangmanDeath = 0;
                gameStarted = false;
                guessedLetters = [];
                score++;
                console.log("you won!");
                document.body.style.backgroundImage = "url('')";
                playGame();

            } else {
                //STATUS UPDATE
                updateHTML();
            }
        }



    </script>
</body>

</html>