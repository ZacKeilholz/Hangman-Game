<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <title>MNMLHNGMN</title>
</head>

<body>


    <div id="game">
        <p>It's a hangman Game! Type 's' to begin. </p>
    </div>

    <script type="text/javascript">


        //Global Vars
        var userInput;
        var gameStarted = false;
        //Create a list of words to be chosen from randomly
        
        var hangmanWordlist = ["and", "terrible"];
        var hangmanUsedWords = [];
        var currentWord = "";
        var currentWordArray = [];

        var blankLetter = "#";
        var wordConstructionArray = [];

        var guessedLetters = [];

        //Counters used in for loops
        var correctLetterFound = 0;

        //Store used words in a fresh array... this might be better as a local variable

        /*Game Score- There are two scores- one for keeping track of hangman death impendence and the other for number of times user wins*/

        var wins = 0;
        var hangmanDeath = 0;
        var score = 0;

        var gameOverValue = 6;

        function playGame() {
            if (gameStarted === false) {
                //Start Game
                wordGenerator();
                gameStarted = true;
            } else if (gameStarted) {

                //1.  Check if letter has been pressed already.  If it hasn't, add it to the checked letter list and if it HAS already been guessed, tell the user... Also, toggle a boolean for next phase.
                letterGuessUsed(userInput);

                //2.  If Letter has NOT been tried already, check if this letter is in the currentWord array, and replace all indices of this letter in the correct array...  If it's NOT in the currentWord Array, hangman death = + 1; 
                if (newGuess) {
                    newGuess = false;
                    replaceLetter(userInput);
                    gameStatusUpdate();
                }
            }
        }

        function wordGenerator() {
            currentWordArray = [];
            wordConstructionArray = [];
            guessedLetters = [];

            //Get a random word from dictionary. 
            var currentWord = hangmanWordlist[Math.floor(Math.random() * hangmanWordlist.length)];
            console.log("Your word is: " + currentWord);
            //Turn currentWord into a blank-space partial-word array
            for (var i = 0; i < currentWord.length; i++) {
                currentWordArray.push(currentWord.charAt(i));
                wordConstructionArray.push(blankLetter);
            }
        }


        function letterGuessUsed(input) {
            console.log("You pressed: " + userInput);
            console.log("Guessed Letters List Length: " + guessedLetters.length);
            //check if input letter is already in the guessed letter array
            for (var i = 0; i < guessedLetters.length; i++) {
                if (input == guessedLetters[i]) {
                    newGuess = false;
                    //console.log("You guessed this letter already");
                    //console.log("Guessed letters: " + guessedLetters[i]);
                }
            }
            if (guessedLetters.length == 0) {
                guessedLetters.push(input);
                newGuess = true;
            } else {
                guessedLetters.push(input);
                newGuess = true;
            }

            if (!newGuess) {
                console.log("You guessed this letter already!  Try again.");

            }
            console.log("Guessed Letters NEW List Length: " + guessedLetters.length);
        };


        function replaceLetter(input) {
            //Death toggle gets tripped if the userInput letter doesn't find a match in the currentWordArray.  
            var deathToggle = false;
            //check if userInput letter is part of the current word
            for (var i = 0; i < currentWordArray.length; i++) {
                if (input === currentWordArray[i]) {
                    console.log("Great job.  You got a letter");
                    wordConstructionArray[i] = input;
                    deathToggle = true;
                }
            }
            if (!deathToggle) {
                hangmanDeath += 1;
            }
        };



        function arrayToString(input) {
            var string = "";
            for (var i = 0; i < input.length; i++) {
                string += input[i];
            }
            return string;
        }


        function gameStatusUpdate() {

            //checks if YOU LOST!
            if (hangmanDeath == gameOverValue) {
                console.log("You DIED!")
                hangmanDeath = 0;
                score = 0;
                gameStarted = false;
                playGame();

                //Checks if you WON!
            } else if (arrayToString(wordConstructionArray) == arrayToString(currentWordArray)) {
                gameStarted = false;
                score++;
                hangmanDeath = 0;
                console.log("you won!");
                playGame();
            } else {

                //STATUS UPDATE
                console.log("Word Construction: " + arrayToString(wordConstructionArray));
                console.log("Current word: " + arrayToString(currentWordArray));
                console.log("Current Score: " + score);
                console.log("Hangman is this close to death: " + hangmanDeath);
                console.log("Guessed letters so far: " + arrayToString(guessedLetters));
                console.log("Word Status: " + arrayToString(wordConstructionArray));
            }
        }

        // This function is run whenever the user presses a key.
        document.onkeyup = function (event) {

            // Determines which key was pressed.
            userInput = event.key;
            //press S to Start the Game
            playGame();

        };





    </script>

</body>

</html>